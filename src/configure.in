dnl Process this file with autoconf to produce a configure script.
AC_INIT(lib/Xm/Form.c)
AC_PREREQ(2.13)
AC_CONFIG_AUX_DIR(.)
AC_PREFIX_DEFAULT(/usr/X11R6)
AM_MAINTAINER_MODE

dnl The version of the OpenMotif libraries
CURRENT=3
REVISION=2
AGE=0
AC_SUBST(CURRENT)
AC_SUBST(REVISION)
AC_SUBST(AGE)

dnl This is really dumb but it seems to be bug
AM_INIT_AUTOMAKE(openMotif,2.2.3)

LIBTOOL_VERSION=$CURRENT:$REVISION:$AGE

dnl
dnl Override a default in libtool.
dnl
dnl AC_DISABLE_STATIC

AM_CONFIG_HEADER(include/config.h)

dnl Checks for programs.
AC_PROG_CC
AC_PROG_CPP
AM_PROG_CC_STDC
AM_PROG_LIBTOOL
AC_EXEEXT

dnl AC_PROG_YACC
dnl Do this the old fashioned way. 'bison -y' doesn't cut it
AC_CHECK_PROGS(YACC, byacc, yacc)

AM_PROG_LEX
AC_PROG_INSTALL
AC_PROG_LN_S
AC_PROG_MAKE_SET

dnl Checks for libraries.

AC_PATH_X
AC_PATH_XTRA
LT_LIB_XTHREADS

dnl Compile in EditRes support if we can find Xmu

save_LIBS="$LIBS"
save_CFLAGS="$CFLAGS"
LIBS="$X_LIBS $LIBS"
CFLAGS="$X_CFLAGS $CFLAGS"
AC_CHECK_HEADERS(X11/Xmu/Editres.h,
AC_CHECK_LIB(Xmu, _XEditResCheckMessages,
X_XMU=-lXmu
AC_DEFINE(HAVE_LIBXMU)
, X_XMU="", -lXt -lX11)
)
AC_SUBST(X_XMU)
LIBS="$save_LIBS"
CFLAGS="$save_CFLAGS"
AM_CONDITIONAL(OM_XMU, test x$X_XMU != x)

dnl Replace `main' with a function in -lFS:
dnl AC_CHECK_LIB(FS, main)
dnl Replace `main' with a function in -lICE:
dnl AC_CHECK_LIB(ICE, IceAcceptConnection)
dnl Replace `main' with a function in -lMCommon:
dnl AC_CHECK_LIB(MCommon, main)
dnl Replace `main' with a function in -lMrm:
dnl AC_CHECK_LIB(Mrm, main)
dnl Replace `main' with a function in -lPEX5:
dnl AC_CHECK_LIB(PEX5, main)
dnl Replace `main' with a function in -lSM:
dnl AC_CHECK_LIB(SM, SmcOpenConnectin)
dnl Replace `main' with a function in -lUil:
dnl AC_CHECK_LIB(Uil, main)
dnl Replace `main' with a function in -lX11:
dnl AC_CHECK_LIB(X11, XOpenDisplay)
dnl Replace `main' with a function in -lXIE:
dnl AC_CHECK_LIB(XIE, main)
dnl Replace `main' with a function in -lXa:
dnl AC_CHECK_LIB(Xa, main)
dnl Replace `main' with a function in -lXau:
dnl AC_CHECK_LIB(Xau, main)
dnl Replace `main' with a function in -lXaw:
dnl AC_CHECK_LIB(Xaw, main)
dnl Replace `main' with a function in -lXbsd:
dnl AC_CHECK_LIB(Xbsd, main)
dnl Replace `main' with a function in -lXdmcp:
dnl AC_CHECK_LIB(Xdmcp, main)
dnl Replace `main' with a function in -lXdpms:
dnl AC_CHECK_LIB(Xdpms, main)
dnl Replace `main' with a function in -lXext:
dnl AC_CHECK_LIB(Xext, main)
dnl Replace `main' with a function in -lXi:
dnl AC_CHECK_LIB(Xi, main)
dnl Replace `main' with a function in -lXkey:
dnl AC_CHECK_LIB(Xkey, main)
dnl Replace `main' with a function in -lXmu:
dnl AC_CHECK_LIB(Xmu, main)
dnl Replace `main' with a function in -lXp:
dnl AC_CHECK_LIB(Xp, XpSelectInput)
dnl Replace `main' with a function in -lXpm:
dnl AC_CHECK_LIB(Xpm, main)
dnl Replace `main' with a function in -lXss:
dnl AC_CHECK_LIB(Xss, main)
dnl Replace `main' with a function in -lXt:
dnl AC_CHECK_LIB(Xt, XtAppInitialize)
dnl Replace `main' with a function in -lXtst:
dnl AC_CHECK_LIB(Xtst, main)
dnl Replace `main' with a function in -lXxf86dga:
dnl AC_CHECK_LIB(Xxf86dga, main)
dnl Replace `main' with a function in -lXxf86misc:
dnl AC_CHECK_LIB(Xxf86misc, main)
dnl Replace `main' with a function in -lXxf86vm:
dnl AC_CHECK_LIB(Xxf86vm, main)
dnl Replace `main' with a function in -lc:
dnl AC_CHECK_LIB(c, main)
dnl Replace `main' with a function in -lfl:
dnl AC_CHECK_LIB(fl, main)
dnl Replace `main' with a function in -lfont:
dnl AC_CHECK_LIB(font, main)
dnl Replace `main' with a function in -lm:
dnl AC_CHECK_LIB(m, main)
dnl Replace `main' with a function in -loldX:
dnl AC_CHECK_LIB(oldX, main)
dnl Replace `main' with a function in -lphigs:
dnl AC_CHECK_LIB(phigs, main)
dnl Replace `main' with a function in -lxkbfile:
dnl AC_CHECK_LIB(xkbfile, main)
dnl Replace `main' with a function in -lxkbui:
dnl AC_CHECK_LIB(xkbui, main)

dnl Checks for header files.
AC_HEADER_DIRENT
AC_HEADER_STDC
AC_HEADER_SYS_WAIT
AC_CHECK_HEADERS(fcntl.h limits.h malloc.h sys/malloc.h strings.h sys/file.h sys/time.h unistd.h wchar.h)
AC_CHECK_HEADERS(wctype.h, AC_DEFINE(HAS_WIDECHAR_FUNCTIONS))
AC_CHECK_HEADER(langinfo.h,,AC_DEFINE(CSRG_BASED))

dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST
AC_TYPE_MODE_T
AC_TYPE_OFF_T
AC_TYPE_PID_T
AC_TYPE_SIZE_T
AC_HEADER_TIME
AC_STRUCT_TM
AC_TYPE_UID_T

dnl Checks for library functions.
AC_FUNC_ALLOCA
AC_FUNC_MEMCMP
AC_FUNC_SETPGRP
AC_TYPE_SIGNAL
AC_FUNC_STRCOLL
AC_FUNC_STRFTIME
AC_FUNC_VFORK
AC_FUNC_VPRINTF
AM_FUNC_VOID_SPRINTF
AC_CHECK_FUNCS(wcslen wcscpy wcsncpy wcschr wcscat wcsncat getcwd gettimeofday mkdir re_comp regcmp select strcspn strerror strstr strtod strtol uname)
AC_CHECK_FUNCS(strdup,,AC_DEFINE(NEED_STRDUP))
AC_CHECK_FUNCS(strcasecmp,,AC_DEFINE(NEED_STRCASECMP))
AC_CHECK_FUNCS(putenv,,AC_DEFINE(NO_PUTENV))
AC_CHECK_FUNCS(regcomp,,AC_DEFINE(NO_REGCOMP))
AC_CHECK_FUNCS(memmove,,AC_DEFINE(NO_MEMMOVE))

AC_ARG_ENABLE(message-catalog, [  --enable-message-catalog
                          Enable building of the message catalog (default=no)])
if test "$enable_message_catalog" != "yes"
then
    AC_DEFINE(NO_MESSAGE_CATALOG)
fi
AM_CONDITIONAL(MessageCatalog, test x$enable_message_catalog = xyes)

if test -f $srcdir/lib/Xm/SlideC.h
then
    AC_DEFINE(HAVE_SLIDEC_H)
    SLIDE_DIST="SlideC.c SlideC.h SlideCP.h"
fi
AC_SUBST(SLIDE_DIST)
AM_CONDITIONAL(OM_SLIDEC, test -f $srcdir/lib/Xm/SlideC.h)

if test x$GCC = xyes
then
    CFLAGS="$CFLAGS -Wall -Wno-unused -Wno-comment"
fi
AC_DEFINE(NO_OL_COMPAT)

CDE_INSTALLATION_TOP="${prefix}/dt"
AC_SUBST(CDE_INSTALLATION_TOP)

CDE_CONFIGURATION_TOP="${prefix}/etc/dt"
AC_SUBST(CDE_CONFIGURATION_TOP)

LIBDIR="${libdir}/X11"
AC_SUBST(LIBDIR)

INCDIR="${includedir}/X11"
AC_SUBST(INCDIR)

XMBINDDIR_FALLBACK="${libdir}/X11/bindings"
AC_SUBST(XMBINDDIR_FALLBACK)

AC_OUTPUT([Makefile \
bindings/Makefile \
bitmaps/Makefile \
clients/Makefile \
clients/mwm/Makefile \
clients/mwm/WmWsmLib/Makefile \
clients/uil/Makefile \
clients/xmbind/Makefile \
config/Makefile \
config/cf/Makefile \
config/imake/Makefile \
config/util/Makefile \
config/makedepend/Makefile \
include/Makefile \
include/Dt/Makefile \
lib/Makefile \
lib/Xm/Makefile \
lib/Mrm/Makefile \
localized/Makefile \
localized/util/Makefile \
doc/Makefile \
doc/man/Makefile \
doc/man/man1/Makefile \
doc/man/man3/Makefile \
doc/man/man4/Makefile \
doc/man/man5/Makefile \
tools/Makefile \
tools/wml/Makefile \
demos/Makefile \
demos/lib/Makefile \
demos/lib/Xmd/Makefile \
demos/lib/Wsm/Makefile \
demos/lib/Exm/Makefile \
demos/lib/Exm/wml/Makefile \
demos/programs/Makefile \
demos/programs/Exm/Makefile \
demos/programs/Exm/app_in_c/Makefile \
demos/programs/Exm/app_in_uil/Makefile \
demos/programs/Exm/simple_app/Makefile \
demos/programs/airport/Makefile \
demos/programs/animate/Makefile \
demos/programs/drag_and_drop/Makefile \
demos/programs/draw/Makefile \
demos/programs/earth/Makefile \
demos/programs/filemanager/Makefile \
demos/programs/fileview/Makefile \
demos/programs/getsubres/Makefile \
demos/programs/hellomotif/Makefile \
demos/programs/hellomotifi18n/Makefile \
demos/programs/hellomotifi18n/C/Makefile \
demos/programs/hellomotifi18n/C/uid/Makefile \
demos/programs/hellomotifi18n/english/Makefile \
demos/programs/hellomotifi18n/english/uid/Makefile \
demos/programs/hellomotifi18n/french/Makefile \
demos/programs/hellomotifi18n/french/uid/Makefile \
demos/programs/hellomotifi18n/hebrew/Makefile \
demos/programs/hellomotifi18n/hebrew/uid/Makefile \
demos/programs/hellomotifi18n/japan/Makefile \
demos/programs/hellomotifi18n/japan/uid/Makefile \
demos/programs/hellomotifi18n/japanese/Makefile \
demos/programs/hellomotifi18n/japanese/uid/Makefile \
demos/programs/hellomotifi18n/swedish/Makefile \
demos/programs/hellomotifi18n/swedish/uid/Makefile \
demos/programs/i18ninput/Makefile \
demos/programs/panner/Makefile \
demos/programs/periodic/Makefile \
demos/programs/piano/Makefile \
demos/programs/popups/Makefile \
demos/programs/sampler2_0/Makefile \
demos/programs/setdate/Makefile \
demos/programs/todo/Makefile \
demos/programs/workspace/Makefile \
demos/programs/tooltips/Makefile \
demos/programs/FontSel/Makefile \
demos/programs/ButtonBox/Makefile \
demos/programs/ColorSel/Makefile \
demos/programs/Column/Makefile \
demos/programs/DropDown/Makefile \
demos/programs/MultiList/Makefile \
demos/programs/MultiList/pixmaps/Makefile \
demos/programs/IconB/Makefile \
demos/programs/Outline/Makefile \
demos/programs/Paned/Makefile \
demos/programs/TabStack/Makefile \
demos/programs/Tree/Makefile \
demos/programs/pixmaps/Makefile \
demos/unsupported/Makefile \
demos/unsupported/Exm/Makefile \
demos/unsupported/aicon/Makefile \
demos/unsupported/dainput/Makefile \
demos/unsupported/dogs/Makefile \
demos/unsupported/hellomotif/Makefile \
demos/unsupported/motifshell/Makefile \
demos/unsupported/uilsymdump/Makefile \
demos/unsupported/xmapdef/Makefile \
demos/unsupported/xmfonts/Makefile \
demos/unsupported/xmforc/Makefile \
demos/unsupported/xmform/Makefile \
demos/doc/Makefile \
demos/doc/programGuide/Makefile \
demos/doc/programGuide/ch05/Makefile \
demos/doc/programGuide/ch05/Scale/Makefile \
demos/doc/programGuide/ch06/Makefile \
demos/doc/programGuide/ch06/spin_box/Makefile \
demos/doc/programGuide/ch06/combo_box/Makefile \
demos/doc/programGuide/ch08/Makefile \
demos/doc/programGuide/ch08/Notebook/Makefile \
demos/doc/programGuide/ch08/Container/Makefile \
demos/doc/programGuide/ch16/Makefile \
demos/doc/programGuide/ch17/Makefile \
demos/doc/programGuide/ch17/simple_drop/Makefile \
demos/doc/programGuide/ch17/simple_drag/Makefile \
])
